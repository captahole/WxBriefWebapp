<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y0BP2Q8MXK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-Y0BP2Q8MXK');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wx Brief</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
</head>

<body>
    <div class="container">
        <header>
            <h1>Wx Brief</h1>
            <div class="utc-time">
                <span>Current UTC:</span>
                <span id="utc-time-display" class="utc-time-value">Loading...</span>
            </div>
        </header>

        <div class="input-section">
            <div class="airport-inputs">
                <div class="input-group">
                    <label for="departure">Departure</label>
                    <input type="text" id="departure" placeholder="JFK" class="airport-input">
                </div>
                <div class="input-group">
                    <label for="arrival">Arrival</label>
                    <input type="text" id="arrival" placeholder="LAX" class="airport-input">
                </div>
                <div class="input-group">
                    <label for="alternate">Alternate (Optional)</label>
                    <input type="text" id="alternate" placeholder="SFO" class="airport-input">
                </div>
            </div>
            <button id="fetch-button" class="primary-button">
                <i class="fas fa-cloud-sun"></i> Get Weather Briefing
            </button>
        </div>

        <div class="auto-refresh-section">
            <label for="refresh-interval">Auto-refresh (sec):</label>
            <input type="number" id="refresh-interval" placeholder="60" min="10">
            <button id="auto-refresh-button" class="secondary-button">
                <i class="fas fa-sync-alt"></i> Start Auto-Refresh
            </button>
        </div>

        <div class="loading-indicator" id="loading-indicator">
            <div class="spinner"></div>
            <p>Fetching weather data...</p>
        </div>


        <div class="data-section">
            <div class="data-card">
                <h2><i class="fas fa-cloud"></i> METAR / TAF</h2>
                <div id="weather-output" class="data-content"></div>
            </div>

            <div class="data-card">
                <h2><i class="fas fa-broadcast-tower"></i> DATIS</h2>
                <div id="datis-output" class="data-content"></div>
            </div>

            <div class="data-card">
                <h2><i class="fas fa-plane-departure"></i> Airport Status</h2>
                <div id="status-output" class="data-content"></div>
            </div>
        </div>

        <footer>
            <p>Data retrieved at <span id="data-timestamp">-</span></p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>